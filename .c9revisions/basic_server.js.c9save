{"ts":1355621133383,"silentsave":true,"restoring":false,"patch":[[{"diffs":[[1,"\n\n/* exercise 1 */\n\nvar http = require('http'),\n    fs = require('fs'),\n    url = require('url');\n    \n    http.createServer(function (request,response) { /* handle request */\n        \n        console.log('createServer');\n        var path = url.parse(request.url).pathname;\n        \n        console.log('createServer path = ' + path);\n        path = '.' + path;\n        getFile(path,function(err,body){\n           console.log('calling getFile'); \n           response.writeHead(body.statusCode, {\n        'Content-Length': body.length,\n        'Content-Type': 'text/html' })\n        response.end(body.body, 'utf-8');\n        });\n        \n    }).listen(process.env.PORT);\n    \n    \n    function getFile(path, callback) {\n        console.log('entered getFile');\n    var response = {};\n    console.log('getFile path = ' + path);\n    fs.readFile(path, function(err, data) {\n        if (err) {\n            console.log('found file failure');\n            response.statusCode = 500;\n            response.body = 'There was an error getting the requested file: ' + err;\n            response.length = response.body.length;\n            console.log(err);\n        } else {\n            console.log('found file success');\n            response.statusCode = 200;\n            response.body = data.toString();\n            response.length = response.body.length;\n        }\n        callback(err, response);\n    });\n    };\n    \n    "]],"start1":0,"start2":0,"length1":0,"length2":1408}]],"length":1408}
